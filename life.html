<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DAYLIFE – Every day counts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #eff6ff, #f5e9ff, #ffe4f3);
      --card-bg: #ffffff;
      --card-border: #e2e8f0;
      --text-main: #0f172a;
      --text-muted: #64748b;
      --primary: #2563eb;
      --primary-2: #7c3aed;
      --shadow-soft: 0 24px 60px rgba(15, 23, 42, 0.1);
      --radius-card: 24px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg-gradient);
      color: var(--text-main);
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .page {
      width: 100%;
      max-width: 960px;
      margin: 0 auto;
      position: relative;
    }

    .language-switcher {
      position: absolute;
      top: 0;
      right: 0;
      display: flex;
      gap: 8px;
      align-items: center;
      font-size: 12px;
      color: var(--text-muted);
    }

    .language-switcher select {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #cbd5f5;
      background: rgba(255, 255, 255, 0.9);
      font-size: 12px;
      outline: none;
    }

    main {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .card {
      width: 100%;
      max-width: 480px;
      background: var(--card-bg);
      border-radius: var(--radius-card);
      border: 1px solid var(--card-border);
      box-shadow: var(--shadow-soft);
      padding: 32px 24px 28px;
      margin-top: 32px;
    }

    .logo-circle {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      margin: 0 auto 16px;
      background: radial-gradient(circle at 30% 20%, #f9fafb, #1d4ed8, #7c3aed);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ffffff;
      font-size: 28px;
    }

    h1 {
      text-align: center;
      font-size: 26px;
      margin: 0 0 8px;
      font-weight: 700;
    }

    .tagline {
      text-align: center;
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 24px;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 14px;
    }

    .field label {
      font-weight: 500;
      color: #334155;
    }

    input[type="date"],
    select {
      padding: 9px 10px;
      border-radius: 10px;
      border: 1px solid #cbd5e1;
      font-size: 14px;
      outline: none;
      background: #f8fafc;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease;
    }

    input[type="date"]:focus,
    select:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.3);
      background-color: #ffffff;
    }

    .button-primary {
      margin-top: 8px;
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 12px 16px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(90deg, var(--primary), var(--primary-2));
      color: #ffffff;
      transition: filter 0.15s ease, transform 0.1s ease;
    }

    .button-primary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
    }

    .button-primary:active {
      transform: translateY(0);
    }

    .button-primary:disabled {
      cursor: not-allowed;
      opacity: 0.55;
      transform: none;
    }

    .result {
      margin-top: 12px;
      font-size: 13px;
      text-align: center;
    }

    .result.error {
      color: #dc2626;
    }

    .result.success {
      color: #16a34a;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="language-switcher">
      <select id="languageSelect"></select>
    </div>

    <main>
      <div class="card">
        <div class="logo-circle">✦</div>
        <h1 id="headline">DAYLIFE</h1>
        <p class="tagline" id="tagline">Every day counts. What will you do with yours?</p>

        <form id="setupForm">
          <div class="field">
            <label for="dob" id="dobLabel">Date of birth *</label>
            <input type="date" id="dob" />
          </div>

          <div class="field">
            <label for="sex" id="sexLabel">Sex *</label>
            <select id="sex">
              <option value="">Select your sex</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </div>

          <div class="field">
            <label for="country" id="countryLabel">Country *</label>
            <select id="country">
              <option value="">Select your country</option>
              <option value="FR">France</option>
              <option value="TH">Thailand</option>
              <option value="US">United States</option>
              <option value="MM">Myanmar</option>
              <option value="ES">Spain</option>
              <option value="DE">Germany</option>
              <option value="BR">Brazil</option>
              <option value="CN">China</option>
              <option value="RU">Russia</option>
              <option value="IN">India</option>
            </select>
          </div>

          <div class="field">
            <label for="calculationMode" id="calcLabel">Life calculation method</label>
            <select id="calculationMode">
              <option value="30000_days">30,000 days (default)</option>
              <option value="by_demographics">Real (based on my profile)</option>
            </select>
          </div>

          <button type="submit" class="button-primary" id="startButton">Start my journey</button>
        </form>

        <p id="resultMessage" class="result"></p>
      </div>
    </main>
  </div>

  <script>
    const translations = {
      en: {
        tagline: "Every day counts. What will you do with yours?",
        dobLabel: "Date of birth *",
        sexLabel: "Sex *",
        countryLabel: "Country of birth *",
        calcLabel: "Life calculation method",
        startButton: "Start my journey",
        errorIncomplete: "Please fill in all required fields.",
        successSaved: "Profile saved. Welcome back!",
      },
      fr: {
        tagline: "Chaque jour compte. Que ferez-vous du vôtre ?",
        dobLabel: "Date de naissance *",
        sexLabel: "Sexe *",
        countryLabel: "Pays de naissance *",
        calcLabel: "Méthode de calcul de vie",
        startButton: "Commencer mon voyage",
        errorIncomplete: "Veuillez remplir tous les champs obligatoires.",
        successSaved: "Profil enregistré. Heureux de vous revoir !",
      }
    };

    const supportedLanguages = [
      { code: "en", label: "English" },
      { code: "fr", label: "Français" },
      { code: "th", label: "ไทย" },
      { code: "my", label: "မြန်မာ" },
    ];

    const langSelect = document.getElementById("languageSelect");
    supportedLanguages.forEach(l => {
      const opt = document.createElement("option");
      opt.value = l.code;
      opt.textContent = l.label;
      langSelect.appendChild(opt);
    });

    const userLang = (navigator.language || "en").slice(0, 2);
    langSelect.value = supportedLanguages.some(l => l.code === userLang) ? userLang : "en";

    function applyLang(lang) {
      const t = translations[lang] || translations["en"];
      document.getElementById("tagline").textContent = t.tagline;
      document.getElementById("dobLabel").textContent = t.dobLabel;
      document.getElementById("sexLabel").textContent = t.sexLabel;
      document.getElementById("countryLabel").textContent = t.countryLabel;
      document.getElementById("calcLabel").textContent = t.calcLabel;
      document.getElementById("startButton").textContent = t.startButton;
    }

    applyLang(langSelect.value);
    langSelect.addEventListener("change", () => applyLang(langSelect.value));

    const form = document.getElementById("setupForm");
    const resultEl = document.getElementById("resultMessage");

    const targetPage = "life.html";
    const isOnTargetPage = window.location.pathname.split("/").pop() === targetPage;

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const lang = langSelect.value;
      const t = translations[lang] || translations["en"];

      const dob = document.getElementById("dob").value;
      const sex = document.getElementById("sex").value;
      const country = document.getElementById("country").value;
      const mode = document.getElementById("calculationMode").value;

      if (!dob || !sex || !country) {
        resultEl.textContent = t.errorIncomplete;
        resultEl.className = "result error";
        return;
      }

      const profile = { dob, sex, country, mode, lang };
      localStorage.setItem("daylifeProfile", JSON.stringify(profile));

      if (!isOnTargetPage) {
        window.location.href = targetPage;
      } else {
        resultEl.textContent = t.successSaved;
        resultEl.className = "result success";
      }
    });

    // ✅ If profile already exists, redirect automatically
    const existingProfile = localStorage.getItem("daylifeProfile");
    if (existingProfile && !isOnTargetPage) {
      window.location.href = targetPage;
    }
  </script>
  <script src="assets/nav.js"></script>
  <script>
    createNavBar("life"); // ou "dreams", "stars", etc. selon la page
  </script>
</body>
</html>
