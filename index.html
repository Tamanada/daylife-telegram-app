<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DAYLIFE – Every day counts</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg-gradient: linear-gradient(135deg,#eff6ff,#f5e9ff,#ffe4f3);
      --card-bg:#ffffff;
      --card-border:#e2e8f0;
      --text-main:#0f172a;
      --text-muted:#64748b;
      --primary:#2563eb;
      --primary-2:#7c3aed;
      --shadow-soft:0 24px 60px rgba(15,23,42,.1);
      --radius-card:24px;
    }

    *{box-sizing:border-box;}

    body {
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:var(--bg-gradient);
      color:var(--text-main);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:20px;
      opacity:0;
      transition:opacity 0.4s ease-in-out;
    }
    body.loaded { opacity:1; }

    h1{font-size:32px;font-weight:700;margin-bottom:10px;text-align:center;}
    p{color:var(--text-muted);text-align:center;}

    .card {
      background:var(--card-bg);
      border:1px solid var(--card-border);
      border-radius:var(--radius-card);
      box-shadow:var(--shadow-soft);
      padding:32px 24px;
      max-width:500px;
      width:100%;
      text-align:center;
    }

    form {
      display:flex;
      flex-direction:column;
      gap:16px;
      margin-top:16px;
    }

    label {
      font-weight:500;
      text-align:left;
      margin-bottom:4px;
      display:block;
      color:var(--text-main);
    }

    input, select {
      padding:10px;
      border-radius:12px;
      border:1px solid #cbd5f5;
      font-size:14px;
      background:#f8fafc;
    }

    .button {
      display:inline-block;
      margin-top:12px;
      padding:12px 20px;
      border-radius:999px;
      font-weight:600;
      color:#fff;
      background:linear-gradient(90deg,var(--primary),var(--primary-2));
      text-decoration:none;
      border:none;
      cursor:pointer;
      transition:filter .2s,transform .1s;
    }

    .button:hover { filter:brightness(1.05); transform:translateY(-1px); }

    .message { margin-top:10px; font-size:13px; color:var(--text-muted); }
  </style>
</head>

<body>
  <div class="card">
    <h1 id="headline">DAYLIFE</h1>
    <p id="tagline">Every day counts. What will you do with yours?</p>

    <form id="setupForm">
      <div>
        <label for="dob" id="dobLabel">Date of birth *</label>
        <input type="date" id="dob" />
      </div>

      <div>
        <label for="sex" id="sexLabel">Sex *</label>
        <select id="sex">
          <option value="">Select your sex</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
      </div>

      <div>
        <label for="country" id="countryLabel">Country *</label>
        <select id="country">
          <option value="">Select your country</option>
          <option value="FR">France</option>
          <option value="TH">Thailand</option>
          <option value="MM">Myanmar</option>
          <option value="US">United States</option>
          <option value="ES">Spain</option>
          <option value="BR">Brazil</option>
          <option value="IN">India</option>
          <option value="CN">China</option>
          <option value="RU">Russia</option>
        </select>
      </div>

      <div>
        <label for="mode" id="calcLabel">Life calculation mode</label>
        <select id="mode">
          <option value="30000_days">30,000 days (default)</option>
          <option value="by_demographics">Real (based on my profile)</option>
        </select>
      </div>

      <button type="submit" class="button" id="startBtn">Start my journey</button>
      <div class="message" id="resultMsg"></div>
    </form>
  </div>

  <footer id="footerText">© DAYLIFE 2025 — Every day counts</footer>

  <script src="assets/langs.js"></script>

  <script>
    const langSel = detectLang();
    const t = LANGS[langSel] || LANGS.en;

    document.getElementById("tagline").textContent = t.slogan;
    document.getElementById("dobLabel").textContent = t.dobLabel || "Date of birth *";
    document.getElementById("sexLabel").textContent = t.sexLabel || "Sex *";
    document.getElementById("countryLabel").textContent = t.countryLabel || "Country *";
    document.getElementById("calcLabel").textContent = t.calcLabel || "Life calculation mode";
    document.getElementById("startBtn").textContent = t.start || "Start my journey";
    document.getElementById("footerText").textContent = t.footer || "";

    const form = document.getElementById("setupForm");
    const msg = document.getElementById("resultMsg");

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const dob = document.getElementById("dob").value;
      const sex = document.getElementById("sex").value;
      const country = document.getElementById("country").value;
      const mode = document.getElementById("mode").value;

      if (!dob || !sex || !country) {
        msg.textContent = t.errorIncomplete || "Please fill in all required fields.";
        msg.style.color = "red";
        return;
      }

      const profile = { dob, sex, country, mode, lang: langSel };
      localStorage.setItem("daylifeProfile", JSON.stringify(profile));

      // ✅ redirect to life.html
      window.location.href = "life.html";
    });

    // ✅ auto redirect if profile already exists
    const existing = localStorage.getItem("daylifeProfile");
    if (existing) window.location.href = "life.html";

    window.addEventListener("load", () => {
      document.body.classList.add("loaded");
    });
  </script>
</body>
</html>
